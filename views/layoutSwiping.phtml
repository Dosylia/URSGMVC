<?php require "views/layout.phtml"; ?>
<?php if (isset($_SESSION['mode'])) : ?>
    <body class="<?= ($_SESSION['mode'] === 'dark') ? 'dark-mode' : '' ?>">
<?php else : ?>
    <body>
<?php endif; ?>

<input id="userUsername" type="hidden" name="userId" value="<?= $_SESSION['username']; ?>">
<input id="userId" type="hidden" name="userId" value="<?= $_SESSION['userId']; ?>">

<header>
    <nav>
        <div class="nav_swiping">
            <div>
                <a href="/"><img title="Home" class="scale" src="public/images/favicon/favicon.ico" alt="logo_ursg"></a>
            </div>

            <div class="nav-swiping-row">
                <a href="/swiping"><img title="Swipe" class="scaleNoRound" src="public/images/swipe-icon.png" alt="swipe"></a>
                <div class="chat_nav">
                    <a href="/persoChat"><img title="Chat" class="scaleNoRound" src="public/images/chat-4-128.png" alt="chat"></a>
                    <span id="unread_messages_container"></span>
                </div>

                <div class="currency">
                    <a href="/store">
                        <p>
                            <img src="public/images/soulhard.png" alt="soulhard">
                            <span id="currency">0</span> 
                        </p>
                    </a>
                </div>

                <div class="chat_profile">
                    <?php if (isset($user['user_picture']) && $user['user_picture'] !== null) : ?>
                        <a id="open_menu_profile"><img class="scale" src="public/upload/<?= $user['user_picture']; ?>" alt="Profile picture of user<?= $user['user_username'] ?>" ></a>
                    <?php else : ?>
                        <a id="open_menu_profile"><img class="scale" src="public/images/defaultprofilepicture.jpg" alt="default profile picture" ></a>
                    <?php endif; ?>
                    <span id="pending_friend_requests_container"></span>
                </div>

                <div class="toggle-container">
                    <div title="Dark mode" id="toggle-button" class="toggle-button"></div>
                </div>
            </div>
        </div>
    </nav>
</header>
    <main>
        <?php if (isset($_GET['message'])) : ?>
            <span class="form-error"><?= $_GET['message'] ?></span>
        <?php endif; ?>
        <?php require $template . ".phtml"; ?>
    </main>
    <script src="public/js/swiping/swiping_menu.js"></script>
    <script src="public/js/swiping/get_notifications.js"></script>  
    <script src="public/js/swiping/get_currency.js"></script>
</body>

</html>